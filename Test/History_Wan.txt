+===========================================================+
+--------------------UDS Scanner项目历史__Wan---------------+         
+===========================================================+

date 16.11.01
------------------------------------------------------------
@author wan
1.UDS Scanner\src中添加: Scanner_G6400.h,Scanner_G6400.cpp,
  CommonFunc.h,CommonFunc.cpp四个文件
2.pub\external\bin中添加: AVSDK.dll一个文件
3.pub\external\include中添加: AVSDK.h一个文件


date 16.11.02
------------------------------------------------------------
@author wan
1.更改项目属性
2.更改History.txt文件格式
3.更改m_Scanner类型为CScanner_FreeImage
4.更改CScanner_FreeImage类成员函数与成员变量的访问权限


date 16.11.03
------------------------------------------------------------
@author wan
1.修改TWAIN_UI.cpp文件


date 16.11.04
------------------------------------------------------------
@author wan
1.GScanner_G6400添加获取DLL路径函数GetDLLPath();
2.重写GScanner_G6400::ImageTransfer()
3.修改CTWAINDS_UDS::transfer()
4.继续编写GScanner_G6400::SUDS_SettingToG6400Setting()


date 16.11.07
------------------------------------------------------------
@author wan
1.添加调试信息
2.更改AVSDK获取句柄方式并注释不需要的调试信息；
3.isFeederLoaded()直接返回true；
4.添加调试信息；
5.将初始化SDK相关接口函数移动到GScanner_G6400构造函数中。


date 16.11.08
------------------------------------------------------------
@author wan
1.更改初始化SDK相关接口函数位置，否则无法显示界面；
2.规范部分注释语句用法
3.添加g_hwndSheet用于保存属性页对话框句柄；
4.修改EnableDS()；
5.base对话框添加button按钮用于测试；
6.将CScanner_Sheet调用方式由DoModol改为Create,及模态改为非模态；

date 16.11.10
------------------------------------------------------------
@author wan
1.将结构体SUDS_Setting改为类CScanner_Base；
2.将CScanner_FreeImage与CScanner_G6400都改为继承自CScanner_Base；
3.更改文件Scanner_G6400.h与Scanner_G6400.cpp文件名为CScanner_G6400.h与CScanner_G6400.cpp
4.win32.cpp中添加通过INI文件读取设备编号功能；
5.修改函数ImageTransfer()；
6.修改函数GetImageData()；

date 16.11.11
------------------------------------------------------------
@author wan
1.CScanner_Base::getSetting()返回值类型改为CScanner_Base*；
2.移动枚举类型DEVICE_NUMBER定义到public.h文件中；
3.更改驱动名称为UDS General TWAIN Scanner；

date 16.11.14
------------------------------------------------------------
@author wan
1.将cerr改为MessageBox
2.新建public.h文件，用于宏、枚举、全局变量等申明；


date 16.11.16
------------------------------------------------------------
@author wan
1.修改函数CScanner_G6400::GetImageData()；
2.修改传输图片数据相关内容；

date 16.11.23
------------------------------------------------------------
@author wan
1.新建类CScanner_OpenCV；
2.修改文件public.h,添加枚举DEVICE_OPENCV；
3.修改MAX(a,b)、MIN(a,b)，强制转化a、b为同一类型；
4.修改项目属性，包含OpenCV相关头文件与库文件；
5.修改CScanner_OpenCV图片旋转时角度为负值；
6.CScanner_OpenCV中添加：水平镜像与垂直镜像、彩色转灰度；


date 16.11.25
------------------------------------------------------------
@author wan
1.修改CTWAINDS_Base::dat_capability()，用于支持重置CTWAINContainerBool型Caps;
2.修改TWAINContainer.h文件，添加BoolVector;
3.修改CPage_Base::InitComboProfile(),用于选择当前模板;
4.解决m_baseMap变量类型冲突，在数字后添加f,则数字为float型变量;
5.实现当前模板功能，用于保存用户上次选择的参数；

date 16.11.28
------------------------------------------------------------
@author wan
1.修改函数MFC_UI::DisplayTWAINGUI();
2.新建类CDlg_Camera,并增加设备编号DEVICE_CAMERA;
3.修改CPage_Base::UpdateControls()与CPage_Base::InitSliderCtrl();
4.解决CScanner_OpenCV中选择黑白图像程序出错的问题，原因是OpenCV
将灰度图像转为黑白图像时，只是将三个通道设为相同的值，每像素位数
(BitsPerPixel)仍为8，而程序中设置的是1，所以在分配的内存小于实际
数据的大小，导致memcpy失败;解决方法就是将程序中的BitsPerPixel改为8;
5.CScanner_OpenCV中添加SetThreshold()与ContrastAndBright()两个函数,
分别用于阈值设置与亮度或对比度调整;
6.修改CScanner_OpenCV::ContrastAndBright();
7.修改CTWAINDS_Base::dat_capability()用来重置CTWAINContainerFix32型CAP;

date 16.11.29
------------------------------------------------------------
@author wan
1.完善类CDlg_Camera，添加大部分控件，并实现其响应函数；
2.修改MFC_UI::DisplayTWAINGUI()，若设备编号=DEVICE_CAMERA,
则始终显示视频界面；
3.将视频预览控价有、由picture改为static用以显示文本;


date 16.11.30
------------------------------------------------------------
@author wan
1.修改CTWAINDS_UDS::getImageInfo(),用于判断设备序号=DEVICE_OPENCV时，
将BitsPerPixel改为8，否则分派的内存空间不足;
2.新建类CCamera_DirectX（基类为CScanner_Base）用于支持摄像头相关操作;
3.实现从配置文件中读取摄像头设置;

date 16.12.01
------------------------------------------------------------
@author wan
1.更改DS名称为UDS General TWAIN DS;
2.更改存放模板文件的目录为C:\ProgramData\UDS\UDS General TWAIN DS

date 16.12.07
------------------------------------------------------------
@author wan
1.实现拍照同时播放声音;
2.解决高拍仪界面不能正常退出的问题;
3.实现传递多张图片的功能;
4.更改.ds文件名为UDS General TWAIN DS.ds
5.增加高拍仪界面关闭消息判断;
6.使用CxImage保存高拍仪拍摄的照片;
7.定义全局变量g_vecCust_ImageInfo;
8.实现在指定路径下创建文件夹;


date 16.12.08
------------------------------------------------------------
@author wan
1.解决高拍仪扫描3张后程序出错的问题;
2.解决高拍仪扫描后不能正常显示界面的问题;
3.解决高拍仪只拍一张时，程序出错的问题
(m_nImageNumber++;位置有误);
4.OpenCV获取图片DPI改用CxImage;
5.解决高拍仪，照片数为0单击确定后出错的bug;
6.实现高拍仪高拍仪界面关闭后，清空临时文件夹;
7.实现高拍仪界面显示缩略图的功能;

date 16.12.09
------------------------------------------------------------
@author wan
1.解决高拍仪，某些APP测试时拍摄多张照片出错的bug;
(解决方法：定义全局变量用于保存当前传输图片的大小)
2.解决高拍仪，拍摄不同文档尺寸的多张照片，第二张后不正常的bug;
(解决方法：CTWAINDS_Base::getDIBImage中再次调用getImageInfo(&m_ImageInfo);)
3.修改高拍仪界面缩略图显示名称为从1开始的数字;

date 16.12.12
------------------------------------------------------------
@author wan
1.解决DEVICE_NUMBER = DEVICE_CAMERA，若APP再次扫描未OpenDS直接EnableDS,程序崩溃的bug;
（解决方法：在EnbaleDS中再次调用resetScanner）
2.DEVICE_NUMBER = DEVICE_CAMERA，在OnInitDialog()中，创建指定路径下的文件夹后，再清空该文件夹;

date 16.12.13
------------------------------------------------------------
@author wan
1.实现高拍仪界面缩略图旋转、翻转与镜像;
2.高级设置(EnableDSUIOnly)，高拍仪不显示界面;
3.高拍仪界面添加属性按钮,并实现其功能;

date 16.12.14
------------------------------------------------------------
@author wan
1.高拍仪界面点击“确定”后，将当前相机设置写入INI文件;

date 16.12.16
------------------------------------------------------------
@author wan
1.CxImage由使用静态库改为的动态库(cximagecrt.dll,隐式链接);
2.释放CxImage型指针变量时改用全局::delete，否则会出错;
3.修改项目属性，添加引入库cximagecrt.lib并生成后拷贝cximagecrt.dll到TWAINDir;

date 16.12.19
------------------------------------------------------------
@author wan
1.更改高拍仪图片传输方式，由保存到磁盘，改为保存HANDLE;
2.更改CTWAINDS_UDS::transfer()获取高拍仪图片数据方式;
由GetImageData()改为getScanStrip();
3.添加全局变量g_vector_imagehandle用于保存图片数据句柄;

date 16.12.27
------------------------------------------------------------
@author wan
1.CxImage由动态库(隐式链接)改为静态库;
2.将高拍仪拍摄的照片直接存储在指定的磁盘位置;
3.定义全局变量g_vector_imagepath用于保存所以图片路径;
4.解决之前只能存储一张图片路径的问题;
（方法：g_vector_imagepath类型由vector<TCHAR*>改为vector<string>）;
5.添加功能【拍摄一张传一张】。通过配置文件读取是否开启该功能，拍摄一张图片后立刻传输一张给APP。与之对应的是【拍摄退出后一起上传】,就是拍摄完了一张并不上传等到点击【确定】按钮后一次上传给APP并关闭界面;
6.添加功能【是否显示缩略图】。若为Y则界面显示缩略图,否则不显示;

date 16.12.29
------------------------------------------------------------
@author wan
1.高拍仪图像类型新增【黑白】;
2.高拍仪新增DPI与阈值更改功能,其中DPI通过ComboBox控件选择对应值，阈值通过Slider控件选择,且该控件只有在【图像类型】为黑白时才可用;


date 16.12.30
------------------------------------------------------------
@author wan
1.更改DPI与阈值的获取方式,由从TWAINContainer获取改为从INI文件获取;
2.【图像类型】为黑白时，目前保存的是jpg格式图片,BPP =8
与灰度图像相同;
3.通过CxImage可将其BPP更改为1，且保存为tif格式图片,但传递给APP时，
黑与白颠倒，即黑变为白，白变为黑;


date 17.01.03
------------------------------------------------------------
@author wan
1.解决高拍仪【图像类型】选黑白时，传递给APP后黑与白颠倒的bug;
(解决方法: 黑白图像需要调用CxImage::Negative()函数进行黑白转换)


date 17.01.04
------------------------------------------------------------
@author wan
1.修改高拍仪临时文件存放位置，存放位置为C:\Users\[用户名]\AppData\Local\Temp\UDS General TWAIN DS；
2.新增图片另存为功能，若配置文件中SaveAs=Y，则图片存放在ImagePath指定的位置;
3.文件命名方式改为通过拍摄时间命名;

date 17.01.13
------------------------------------------------------------
@author wan
1.替换CDlg_Camera.cpp与CTWAINDS_UDS.h文件为修改后版本;

date 17.01.16
------------------------------------------------------------
@author wan
1.修复先调用EnableDSUIOnly，再NoUI扫描时，涉及到纸张数相关Cap出错的bug;
  解决方法：注释CTWAINDS_UDS::findCapability()中UDSCAP_DOCS_IN_ADF(用于设置纸张的)相关的代码，因为这里将纸张数重置为0，导致其它程序中地方设置纸张数不成功；
2.修复OpenCV，多流输出时再次扫描出错的bug;
  解决方法：CScanner_OpenCV::SwitchBYTE()中添加判断条件，当0x00 == tempbyte时，执行tempbyte = src；

date 17.01.17
------------------------------------------------------------
@author wan
1.修复OpenCV，显示界面后直接在【基本】属性页点扫描，而不进入【高级】属性页时，程序崩溃的bug;
解决方法：将获取控件方法由GetDlgItem()换为控件变量;
2.新建Cap【UDSCAP_MULTISTRAM_VALUE】用于保存多流选项值（注：存在加载模板后获取值不正确的问题）
3.解决OpenCV，显示界面后直接在【基本】属性页点扫描，而不进入【高级】属性页时，选择多流扫描错误的bug;
解决方法：在CSheet_Scanner::OnInitDialog()中添加SetActivePage(m_p_page_advanced)与SetActivePage(m_p_page_base)，用于现将【高级】属性页设为活动页，再将【基本】属性页设为活动页，否则【高级】属性页的控件未初始化；
4.修复【基本】属性页与【高级】属性页中多流控件未同步的问题；
解决方法：定义全局变量g_bMuiltStream用于保存多流控件状态;

date 17.01.19
------------------------------------------------------------
@author wan
1.删除NoUI扫描时，OpenDS()中先调用模板再响应APP的Capability的值；
2.修复界面显示上面扫，但是第一次扫描后只有一张图的bug;
3.从项目中移除3个属性页类;
4.更改类CCamera_DirectX名称为CCamera_CxImage;
4.更改类CScanner_Base名称为CDevice_Base；

date 17.02.20
------------------------------------------------------------
@author wan
1.修改变量CTWIANDS_BASE::g_myIdentity_Chinese; 

date 17.02.24
------------------------------------------------------------
@author wan
1.移除FreeImage,G6400及其相关文件;
2.重新定义DEVICE_NUMBER;
3.更改项目属性;
4.移除CDlg_Camera,CUDSCapture,CSGCallBack;
5.增加基于控件UDS_Vdeo.ocx的类CDlg_Video；
6.完成CDlg_Video界面的绘制；
7.添加UDS_Video.ocx控件，并响应对应的事件；
8.实现拍照与条码拍照后上传给APP的功能；
9.PDF拍照存在问题，有待解决；

date 17.02.27
------------------------------------------------------------
@author wan
1.修复Camera模式，未拍照点击【确定】后程序出错的bug;
2.重新布局高拍仪界面，删除TWAIN DS不需要的功能；
3.调整图像类型使其与TWAIN兼容；
4.保存的文件统一定义为bmp格式；

date 17.02.28
------------------------------------------------------------
@author wan
1.实现DPI与分辨率切换，并响应对应的事件;
2.增加模板功能。Camera模式初始从INI文件读取上次配置，点击【确定】后将用户本次配置写入INI文件；


date 17.03.01
------------------------------------------------------------
@author wan
1.修复配置文件中保存的摄像头未连接时，程序显示错误的bug;
方法：删除配置文件中的摄像头编号(CameraIndex)项并增加摄像头名称(CameraName)项，用于保存上次选定的摄像头；
2.更改CxImage(6.0.0)库调用方式：由静态库改为动态库；
3.更改项目属性。添加UDS_Video.ocx控件必要的依赖库文件；
4.调整高拍仪界面布局；
5.增加拍照开启声音功能；

date 17.03.02
------------------------------------------------------------
@author wan
1.修复Camera模式与OpenCV模式，内存泄露的bug;
方法：在基类CDevice_Base中添加方法Release()用于释放最后一张纸占用的内存；
2.模板中删除DPI编号(DPIIndex)与图像类型(PixelType);
原因：从APP中接收最新的DPI与图像类型值；
3.增加CScanner_G6X00类，用于控制G6400与G6600两个型号扫描仪；
注：已搭建基本架构，有待完善。

date 17.03.03
------------------------------------------------------------
@author wan
1.完成扫描参数设置，已可实现单张扫描；
2.增加根据指定的纸张大小计算其对应的宽度与高度（单位：英寸）；
3.实现单双面扫，多页扫描与长纸模式，扫描速度与G6400或G6600一致；

date 17.03.06
------------------------------------------------------------
@author wan
1.类CScanner_G6X00中删除变量m_pRearBuffer,并将变量m_pFrontBuffer更名为m_pSaveBuffer;
2.将内存中数据转为Mat，利用OpenCV进行图像处理；