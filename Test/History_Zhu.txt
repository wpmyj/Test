+===========================================================+
+--------------------UDS Scanner项目历史__Zhu---------------+         
+===========================================================+

date 16.11.01
------------------------------------------------------------
@author zhu
1.设置参数的默认值，扫描类型为自动进纸器、图形类型为彩色、分辨率为200、单面/双面为单面、对比度为0、亮度为0、阈值为230（滑动条上为0）、重张检测默认选中。
2、CTWAINDS_UDS文件添加所用参数注释


date 16.11.03
------------------------------------------------------------
@author zhu
1.隐藏“显示图片”按钮，只供虚拟扫描仪使用
2.重新排版基本设置界面
3.修改流程，点击确定按钮时，才保存所选设置
4.修改CPage_Base::OnOK()，使用map添加各下拉框改变时的状态监测，key值存ICAP等值，value存对应的数值

@author zhu
1.添加SetControl（），设置修改的参数
2.添加“保存当前模板”按钮的消息响应函数OnBase_Btn_Saveprofile()；


date 16.11.04
------------------------------------------------------------
@author zhu
高级设置界面
1、修改Combo纸张大小的值
2、修改CTWAINDS_UDS的Initialize()，添加图像旋转所需功能（|| !pnCap->Add(ICAP_ROTATION)）及其值TWOR_ROT0，TWOR_ROT90，TWOR_ROT180，TWOR_ROT270
3、添加Combo分辨率、图像旋转的值

4.完善图像旋转功能

5.同样添加SetControl函数，
6.添加CPage_Advanced::OnOK()
7.使用map添加“纸张方向、纸张大小、单位”下拉框改变时的状态监测

8.添加高级设置界面分辨率与旋转图像下拉框 改变的消息响应函数OnCbnSelchangeAdvanced_Combo_Resolution与OnCbnSelchangeAdvanced_Combo_Rotate。
9.使用GetDlgItem(IDC_CHECK_FRONTCOLOR)->EnableWindow(FALSE);方式设置多流输出下的选项默认不选中

date 16.11.07
------------------------------------------------------------
@author zhu
1.滑动条亮度、对比度以及编辑框均初始为False
2.添加SetMultistream（）函数根据m_check_multistream.GetCheck()状态设置各参数能否使用

date 16.11.08
------------------------------------------------------------
@author zhu
1.修改基本界面与高级界面的控制流程。由于属性页的确认控制都是由一个OnOK控制的，如果当客户在选择了基本界面的参数后，又直接进入了高级设置，从高级设置界面点击确认按钮时，就只会设置高级设置界面的参数，所以讨论后仍然决定是每一次点击Combo时设置（SetCap）.
2.添加OnNMCustomdrawAdvanced_Slider_Brightness，OnNMCustomdrawAdvanced_Slider_Contrast，OnEnChangeAdvanced_Edit_Contrast，OnEnChangeAdvanced_Edit_Brightness，（滑动条与编辑框的消息响应函数）
3.调试高级界面图像旋转功能无效的问题。

date 16.11.09
------------------------------------------------------------
@author zhu
1、增加高级设置的滑动条等控制
2、去除旋转相关的功能

3.增加旋转的功能，分别在CTWAINDS_UDS类中的StoreCustomDSdata、ReadCustomDSdata、Initialize、updateScannerFromCaps函数中添加相应的代码，把ICAP_ROTATION增加进容器。
4、在CScanner_FreeImage类中的SUDS_Setting结构体增加变量，并在resetScanner、setSetting函数添加对应的赋值语句
5、最重要的是要在CScanner_FreeImage类的preScanPrep函数中增加相应的图像处理代码。
但是该版本旋转90、270时只显示一半，旋转180时左侧图像有丢失。

date 16.11.10
------------------------------------------------------------
@author zhu
1、查找选择黑白时，出图为纯白色的问题，最终发现是因为阈值默认设置为0 ，所以把大于0的部分全部设置为白色了
2、添加InitComboPixType（）函数，判断选择黑白图时，阈值可用，亮度、对比度不可用；其他相反。
3、选择黑白图时阈值默认为230，其他按滑动条设置
4、完成纸张方向（横向、纵向）；此处是逆时针旋转，旋转图像功能是顺时针旋转

date 16.11.11
------------------------------------------------------------
@author zhu
1、补全纸张大小的所有参数选项，增加A3,ISOB4,JISB4,最大扫描，并测试通过
2、查找其他功能参数在twain中的对应，注释twain.h
3、调试但未解决一个Bug,长纸模式未加入纸张大小选项中。

date 16.11.14
------------------------------------------------------------
@author zhu
1、解决长纸模式未加入的问题，在CTWAIN_UDS的Initialize中忘记Add(CUSTCAP_LONGDOCUMENT)
2、为二值化添加下拉框的选项值，添加OnCbnSelchangeAdvanced_Combo_Binarization函数，以及OnCbnSelchangeAdvanced_Combo_SpiltImage函数
3、添加函数SetBinarization，处理二值化选择动态阈值时，对应去除斑点滑动条的范围，设置默认值为20；选择固定阈值时，对应底色保留滑动条的范围，设置默认值为128；两者互斥。

4、合并与宛的冲突的代码

date 16.11.15
------------------------------------------------------------
@author zhu
1、解决旋转与横向/纵向的冲突，横向时旋转框架
2、增加高级设置其他几个checkBox（去除空白页、去除穿孔、锐化图像、Gamma图像校正、图像镜像处理、去除背景、去除网纹、去除噪声、自动裁切与校正）的响应以及对应的CAP、选项值
3、但是功能实现存在Bug，调试当中

date 16.11.16
------------------------------------------------------------
@author zhu
1、SetCapInt返回0，错误，调试到_datCap
2、SetCapValueInt一直返回为0，证明是CAP的问题，尝试修改为SetCapValueFloat，并把参数类型也改为float型等
3、改为SetCapValueFloat正确。
CTWAINDS_UDS::Initialize()中改为：
	FLOAT_RANGE fRange;
	fRange.fCurrentValue = 0.0f;
	fRange.fMaxValue = 10.0f;
	fRange.fMinValue = -10.0f;
	fRange.fStepSize = 1.0f;
	// 去除空白页等
	m_IndependantCapMap[ICAP_AUTODISCARDBLANKPAGES] = new CTWAINContainerFix32Range(ICAP_AUTODISCARDBLANKPAGES,fRange, TWQC_ALL);
	if( NULL == dynamic_cast<CTWAINContainerFix32Range*>(m_IndependantCapMap[ICAP_AUTODISCARDBLANKPAGES]))
	{
		::MessageBox(g_hwndDLG,TEXT("Could not create ICAP_AUTODISCARDBLANKPAGES !"),MB_CAPTION,MB_OK);
		//cerr << "Could not create ICAP_AUTODISCARDBLANKPAGES" << endl;
		setConditionCode(TWCC_LOWMEMORY);
		return TWRC_FAILURE;
	}

CTWAINDS_UDS::updateScannerFromCaps()中改为：
	if(0 == (pfRCap = dynamic_cast<CTWAINContainerFix32Range*>(findCapability(ICAP_AUTODISCARDBLANKPAGES))))
	{
		::MessageBox(g_hwndDLG,TEXT("Could not get ICAP_AUTODISCARDBLANKPAGES!"),MB_CAPTION,MB_OK);
		//cerr << "Could not get ICAP_AUTODISCARDBLANKPAGES" << endl;
		bret = false;
	}
	else
	{
		pfRCap->GetCurrent(fVal);
		settings.m_fRemoveBlank = fVal;
	}
4、调试语句
	if(m_nBinarization == TWBZ_HALFTONE4)
	{
	::MessageBox(g_hwndDLG,TEXT("半色调4"),MB_CAPTION,MB_OK);
	}
	else if(m_nBinarization == TWBZ_DYNATHRESHOLD)
	{
	::MessageBox(g_hwndDLG,TEXT("二值化自动可用"),MB_CAPTION,MB_OK);
	}

	if(m_nSpiltImage == TWSI_NONE)
	{
	::MessageBox(g_hwndDLG,TEXT("分割图像不可用"),MB_CAPTION,MB_OK);
	}
	else if(m_nSpiltImage == TWSI_HORIZONTAL)
	{
	::MessageBox(g_hwndDLG,TEXT("水平分割可用"),MB_CAPTION,MB_OK);
	}
	else if(m_nSpiltImage == TWSI_VERTICAL)
	{
	::MessageBox(g_hwndDLG,TEXT("垂直分割可用"),MB_CAPTION,MB_OK);
	}

	if(m_fRemoveBlank == TWBP_DISABLE)
	{
		::MessageBox(g_hwndDLG,TEXT("去除空白页不可用"),MB_CAPTION,MB_OK);
	}
	else if(m_fRemoveBlank == TWBP_AUTO)
	{
		::MessageBox(g_hwndDLG,TEXT("去除空白页可用"),MB_CAPTION,MB_OK);
	}

	if(m_fRemovePunch == TWRP_DISABLE)
	{
		::MessageBox(g_hwndDLG,TEXT("去除穿孔不可用"),MB_CAPTION,MB_OK);
	}
	else if(m_fRemovePunch == TWRP_AUTO)
	{
		::MessageBox(g_hwndDLG,TEXT("去除穿孔可用"),MB_CAPTION,MB_OK);
	}
	/*char buf[1024];
	itoa((int)m_fRemovePunch,buf,10);
	::MessageBox(g_hwndDLG,buf,"去除穿孔值",MB_OK);*/

	if(m_fSharpen == TWSP_DISABLE)
	{
		::MessageBox(g_hwndDLG,TEXT("图像锐化不可用"),MB_CAPTION,MB_OK);
	}
	else if(m_fSharpen == TWSP_AUTO)
	{
		::MessageBox(g_hwndDLG,TEXT("图像锐化可用"),MB_CAPTION,MB_OK);
	}

	if(m_fMirror == TWMR_DISABLE)
	{
		::MessageBox(g_hwndDLG,TEXT("镜像不可用"),MB_CAPTION,MB_OK);
	}
	else if(m_fMirror == TWMR_AUTO)
	{
		::MessageBox(g_hwndDLG,TEXT("镜像可用"),MB_CAPTION,MB_OK);
	}

	if(m_fRemoveBack == TWRB_DISABLE)
	{
		::MessageBox(g_hwndDLG,TEXT("去除背景不可用"),MB_CAPTION,MB_OK);
	}
	else if(m_fRemoveBack == TWRB_AUTO)
	{
		::MessageBox(g_hwndDLG,TEXT("去除背景可用"),MB_CAPTION,MB_OK);
	}

	if(m_fDescreen == TWDS_DISABLE)
	{
		::MessageBox(g_hwndDLG,TEXT("去除网纹不可用"),MB_CAPTION,MB_OK);
	}
	else if(m_fDescreen == TWDS_AUTO)
	{
		::MessageBox(g_hwndDLG,TEXT("去除网纹可用"),MB_CAPTION,MB_OK);
	}

	if(m_fDenoise == TWDN_DISABLE)
	{
		::MessageBox(g_hwndDLG,TEXT("去除噪声不可用"),MB_CAPTION,MB_OK);
	}
	else if(m_fDenoise == TWDN_AUTO)
	{
		::MessageBox(g_hwndDLG,TEXT("去除噪声可用"),MB_CAPTION,MB_OK);
	}

	if(m_fAutoCrop == TWAC_DISABLE)
	{
		::MessageBox(g_hwndDLG,TEXT("自动裁切不可用"),MB_CAPTION,MB_OK);
	}
	else if(m_fAutoCrop == TWAC_AUTO)
	{
		::MessageBox(g_hwndDLG,TEXT("自动裁切可用"),MB_CAPTION,MB_OK);
	}

5、修改CUSTCAP_PUNCHHOLEREMOVEL等参数为UDSCAP_PUNCHHOLEREMOVEL